<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `iterate` mod in crate `differential_dataflow`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, iterate">

    <title>differential_dataflow::operators::iterate - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='../../index.html'>differential_dataflow</a>::<wbr><a href='../index.html'>operators</a></p><script>window.sidebarCurrent = {name: 'iterate', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Module <a href='../../index.html'>differential_dataflow</a>::<wbr><a href='../index.html'>operators</a>::<wbr><a class='mod' href=''>iterate</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-1505' class='srclink' href='../../../src/differential_dataflow/src/operators/iterate.rs.html#1-124' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>Iterative application of a differential dataflow fragment.</p>

<p>The <code>iterate</code> operator takes as an argument a closure from a differential dataflow stream to a
stream of the same type. The output are differences which accumulate to the result of applying
this closure a specified number of times.</p>

<p>The implementation of <code>iterate</code> does not directly apply the closure, but rather establishes an
iterative timely dataflow subcomputation, in which differences circulate until they dissipate
(indicating that the computation has reached fixed point), or until some number of iterations
have passed.</p>

<p>The <code>iterate</code> method is written using a <code>Variable</code>, which lets you define your own iterative 
computations when <code>iterate</code> itself is not sufficient. This can happen when you have two 
collections that should evolve simultaneously, or when you would like to return an intermediate 
result from your iterative computation.</p>

<p>Using <code>Variable</code> requires more explicit arrangement of your computation, but isn&#39;t much more
complicated. You must define a new variable from an existing stream (its initial value), and 
then set it to be a function of this variable (and perhaps other collections and variables).</p>

<p>A <code>Variable</code> derefences to a <code>Collection</code>, the one corresponding to its value in each iteration,
and it can be used in most situations where a collection can be used. The act of setting a 
<code>Variable</code> consumes it and returns the corresponding <code>Collection</code>, preventing you from setting
it multiple times.</p>

<h1 id='examples' class='section-header'><a href='#examples'>Examples</a></h1>
<p>The example repeatedly divides even numbers by two, and leaves odd numbers as they are. Although
some numbers may take multiple iterations to converge, converged numbers have no overhead in
subsequent iterations.</p>

<pre class='rust rust-example-rendered'>
<span class='comment'>// repeatedly divide out factors of two.</span>
<span class='kw'>let</span> <span class='ident'>limits</span> <span class='op'>=</span> <span class='ident'>numbers</span>.<span class='ident'>iterate</span>(<span class='op'>|</span><span class='ident'>values</span><span class='op'>|</span> {
    <span class='ident'>values</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>x</span> <span class='kw'>if</span> <span class='ident'>x</span> <span class='op'>%</span> <span class='number'>2</span> <span class='op'>==</span> <span class='number'>0</span> { <span class='ident'>x</span><span class='op'>/</span><span class='number'>2</span> } <span class='kw'>else</span> { <span class='ident'>x</span> })
});</pre>

<p>The same example written manually with a <code>Variable</code>:</p>

<pre class='rust rust-example-rendered'>
<span class='comment'>// repeatedly divide out factors of two.</span>
<span class='kw'>let</span> <span class='ident'>limits</span> <span class='op'>=</span> <span class='ident'>computation</span>.<span class='ident'>scoped</span>(<span class='op'>|</span><span class='ident'>scope</span><span class='op'>|</span> {
    <span class='kw'>let</span> <span class='ident'>variable</span> <span class='op'>=</span> <span class='ident'>Variable</span>::<span class='ident'>from</span>(<span class='ident'>numbers</span>.<span class='ident'>enter</span>(<span class='ident'>scope</span>));
    <span class='kw'>let</span> <span class='ident'>result</span> <span class='op'>=</span> <span class='ident'>variable</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>x</span> <span class='kw'>if</span> <span class='ident'>x</span> <span class='op'>%</span> <span class='number'>2</span> <span class='op'>==</span> <span class='number'>0</span> { <span class='ident'>x</span><span class='op'>/</span><span class='number'>2</span> } <span class='kw'>else</span> { <span class='ident'>x</span> });
    <span class='ident'>variable</span>.<span class='ident'>set</span>(<span class='kw-2'>&amp;</span><span class='ident'>result</span>)
            .<span class='ident'>leave</span>()
})</pre>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.Variable.html'
                                  title='differential_dataflow::operators::iterate::Variable'>Variable</a></td>
                           <td class='docblock short'>
                                <p>A differential dataflow collection variable</p>
                           </td>
                       </tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.IterateExt.html'
                                  title='differential_dataflow::operators::iterate::IterateExt'>IterateExt</a></td>
                           <td class='docblock short'>
                                <p>An extension trait for the <code>iterate</code> method.</p>
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../";
        window.currentCrate = "differential_dataflow";
        window.playgroundUrl = "";
    </script>
    <script src="../../../jquery.js"></script>
    <script src="../../../main.js"></script>
    
    <script defer src="../../../search-index.js"></script>
</body>
</html>